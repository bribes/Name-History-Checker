/* copyright (c) Faav 2021, all rights reserved */
/* FaavJS v1.2 / MIT License / https://github.com/withdrew/FaavJS */
function roundNumber(e,r){return Math.round(e*Math.pow(10,r))/Math.pow(10,r)}function getLevel(e){const r=[1e5,15e4,25e4,5e5,75e4,1e6,125e4,15e5,2e6,25e5,25e5,25e5,25e5,25e5,3e6];let a=0;for(let s=0;s<=1e3;s+=1){let l=0;if(e-(l=s>=r.length?r[r.length-1]:r[s])<0)return Math.round(100*(a+e/l))/100;a+=1,e-=l}return 1e3}function getSkyLevel(e){var r=[0,20,70,150,250,500,1e3,2e3,3500,6e3,1e4,15e3];let a=1;if(e>=15e3)a=roundNumber((e-15e3)/1e4+12,2);else for(i=0;i<r.length;i++)if(e<r[i]){a=Math.floor(i+(e-r[i-1])/(r[i]-r[i-1]));break}return a}function toUnix(e){return new Date(e).valueOf()}async function lookup(e){await fetch("https://api.gapple.pw/blocked/"+e).then(e=>e.json()).then(r=>{player=new Object({}),player.status=r.status,"soon"===player.status&&(player.droptime=toUnix(r.drop_time)),"blocked"==player.status&&!1===/^[a-zA-Z0-9_]{3,16}$/.test(e)&&(player.status="invalid"),fetch("https://api.gapple.pw/status/"+e).then(e=>e.json()).then(r=>{player.type=r.status,fetch("https://playerdb.co/api/player/minecraft/"+e).then(e=>e.json()).then(e=>{!0===e.error?player.error=e.error:player.error=!1,player.username=e.data.player.username,player.uuid=e.data.player.id,player.id=e.data.player.raw_id,player.name_history=e.data.player.meta.name_history.reverse(),player.skin=`https://crafatar.com/skins/${player.id}`,player.renders=new Object({}),player.renders.icon=`https://mc-heads.net/avatar/${player.uuid}`,player.renders.avatar_1=`https://mc-heads.net/body/${player.uuid}`,player.renders.avatar_1.right=`https://mc-heads.net/body/${player.uuid}/right`,player.renders.avatar_1.left=`https://mc-heads.net/body/${player.uuid}/left`,player.renders.avatar_2=`https://visage.surgeplay.com/full/${player.uuid}`,player.renders.avatar_3=`https://mc-heads.net/player/${player.uuid}`,player.renders.bust_1=`https://visage.surgeplay.com/front/${player.id}`,player.renders.bust_2=`https://visage.surgeplay.com/bust/${player.id}`,player.renders.head_1=`https://mc-heads.net/head/${player.uuid}`,player.renders.head_2=`https://visage.surgeplay.com/head/${player.id}`,player.renders.combo=`https://mc-heads.net/combo/${player.uuid}`,player.cosmetics=new Object({}),player.cosmetics.capes=new Object({}),player.cosmetics.capes.official=`https://crafatar.com/capes/${player.id}`,player.cosmetics.capes.optifine=`https://api.gapple.pw/cors/optifine/${player.username}`,player.cosmetics.capes.labymod=`https://api.gapple.pw/cors/labymod/cape/${player.id}`,player.cosmetics.bandanas=new Object({}),player.cosmetics.bandanas.labymod=`https://api.gapple.pw/cors/labymod/bandana/${player.id}`,player.servers=new Object({}),fetch("https://api.hypixel.net/player?key=63f20355-92d7-42d7-a2a5-6457160aa4eb&uuid="+player.id).then(e=>e.json()).then(e=>{player.servers.hypixel=new Object({}),player.servers.hypixel.success=e.success,'{"success":true}'!==JSON.stringify(player.servers.hypixel)||null!==e.player&&(player.servers.hypixel.rank=e.player.rank,player.servers.hypixel.newPackageRank=e.player.newPackageRank,player.servers.hypixel.monthlyPackageRank=e.player.monthlyPackageRank,player.servers.hypixel.firstLogin=e.player.firstLogin,player.servers.hypixel.lastLogin=e.player.lastLogin,player.servers.hypixel.lastLogout=e.player.lastLogout,player.servers.hypixel.networkExp=e.player.networkExp,player.servers.hypixel.networkLevel=roundNumber(Math.sqrt(2*player.servers.hypixel.networkExp+30625)/50-2.5,2),player.servers.hypixel.karma=e.player.karma,void 0!==e.player.stats&&(player.servers.hypixel.stats=e.player.stats,void 0!==player.servers.hypixel.stats.SkyWars&&(player.servers.hypixel.stats.SkyWars.level=getSkyLevel(player.servers.hypixel.stats.SkyWars.skywars_experience)),void 0!==player.servers.hypixel.stats.Bedwars&&(player.servers.hypixel.stats.Bedwars.level=e.player.achievements.bedwars_level))),fetch("https://api.hypixel.net/status?key=63f20355-92d7-42d7-a2a5-6457160aa4eb&uuid="+player.id).then(e=>e.json()).then(e=>{player.servers.hypixel.online=e.session.online,fetch("https://api.hypixel.net/guild?key=63f20355-92d7-42d7-a2a5-6457160aa4eb&player="+player.id).then(e=>e.json()).then(e=>{player.servers.hypixel.guild=new Object({}),player.servers.hypixel.guild.success=e.success,null!==e.guild&&(player.servers.hypixel.guild.id=e.guild._id,player.servers.hypixel.guild.name=e.guild.name,player.servers.hypixel.guild.createdAt=e.guild.created,player.servers.hypixel.guild.members=e.guild.members,player.servers.hypixel.guild.ranks=e.guild.ranks,player.servers.hypixel.guild.exp=e.guild.exp,player.servers.hypixel.guild.level=roundNumber(getLevel(player.servers.hypixel.guild.exp),0),player.servers.hypixel.guild.tag=e.guild.tag,player.servers.hypixel.guild.tagColor=e.guild.tagColor,player.servers.hypixel.guild.coins=e.guild.coins,player.servers.hypixel.guild.coinsEver=e.guild.coinsEver,player.servers.hypixel.guild.expByGameType=e.guild.guildExpByGameType),player.servers.hypixel.friends=new Object({}),fetch("https://api.hypixel.net/friends?key=63f20355-92d7-42d7-a2a5-6457160aa4eb&uuid="+player.id).then(e=>e.json()).then(e=>{for(var r="",a="",s=0;s<e.records.length;s++)e.records[s].uuidSender!==e.uuid&&(r+=e.records[s].uuidSender+","),e.records[s].uuidReceiver!==e.uuid&&(r+=e.records[s].uuidReceiver+","),a+=e.records[s].started+",";for(var l=r.slice(0,-1).split(","),p=[],t=l.length-1;t>=0;t--)p.push(l[t]);for(var i=a.slice(0,-1).split(","),y=[],n=i.length-1;n>=0;n--)y.push(i[n]);player.servers.hypixel.friends.uuid=JSON.parse(JSON.stringify(p)),player.servers.hypixel.friends.timestamp=JSON.parse(JSON.stringify(y))}),code()})}).catch(e=>player.error=!0)})})})})}
